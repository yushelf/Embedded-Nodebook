设计思路：主控选用stm32，其他模块有51单片机，esp8266,蓝牙模块，红外模块。51单片机与stm32各配一个红外传感器，安装在指定位置，根据两个红外模块的收集信息，即可判断当前排队的大致人数，并且32通过串口，将数据发送给8266，8266采用MQTT协议，将数据传输至阿里云物联网平台，进行数据可视化。其中51与32也是采用串口进行通信。

流程图：

51单片机与蓝牙进行串口 通信 àà 51搭配红外传感器，判断51单片机初的红外是否被触发，更具不同的情况，通过Zigbee发送信息至32 àà 32与esp8266通过串口进行通信 àà 32通过串口中断接收到了51发来的数据，结合自身的红外传感器情况，处理数据得出当前排队人数 àà通过串口将数据发送至8266 àà 8266通过MQTT将数据传送至物联网平台

 

痛点：

市面上的一些人流检测项目高成本，且开发难度大，此项目可部署至具体场景，如游乐场等地，以解决相关问题

 

难点：

MQTT的移植，中断寄存器的配置，通信协议移植

 

项目亮点：

通信协议，配置寄存器，完成中断系统，时钟树、GPIO口的初始化，MQTT (裸机程序，计算机网络知识)

